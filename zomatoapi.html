<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <title>Document</title>
</head>



<body>

<div class = 'container'>

<div class = 'row'>
    <div class = 'col-sm-12'>
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown">
                    City
                </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Charlotte</a>
                <a class="dropdown-item" href="#">Matthews</a>
                <a class="dropdown-item" href="#">Plaza Midwood</a>
            </div>
            
            </div>
        </div>
    </div>

    <div class = 'row'>
     <div class = 'col-sm-6'>
        <button type = 'button' id = 'apibutton' class = 'btn btn-primary'>API Check</button>
     </div>
     <div class = 'col-sm-6'>
        <button type = 'button' id = 'distanceButton' class = 'btn btn-primary'>Distance</button>
     </div>
    </div>

    <div class = 'row'>
        <div class = 'col-sm-6'>
          <div id = 'show-results'></div>
        </div>
        <div class = 'col-sm-6'>
          <div id = 'show-duration'></div>
        </div>
    </div>






        
</div>

<script src="https://apis.google.com/js/api.js" type="text/javascript"></script>
<script type='text/javascript'>

        
        var queryURL = "https://developers.zomato.com/api/v2.1/search?entity_id=303&entity_type=city&q=pub&count=10&cuisines=american"

    document.getElementById('apibutton').addEventListener('click', zomatoAPI)
    function zomatoAPI(event){
        $.ajax({  
    url: queryURL,
    dataType: 'json',
    async: true,
    beforeSend: function(xhr){xhr.setRequestHeader('user-key', 
    'c837c692050384b3446ac7955ad2641b');},  // This inserts the api key into the HTTP header
    success: function(response){
    console.log(response.restaurants[0].restaurant) 
    console.log(response.restaurants[0].restaurant.average_cost_for_two) 
    console.log(response.restaurants[0].restaurant.cuisines) 

    let restaurants = response.restaurants

    for (var i = 0; i < restaurants.length; i++){
        let results = restaurants[i].restaurant
        let showDiv = $('<div class>')
        let averagefor2 = $('<p>').text('Average for two: ' + results.average_cost_for_two)
        let cuisines = $('<p>').text('Cuisines: ' + results.cuisines)
        let location = $('<p>').text('Address: ' + results.location.address)
        let showImage = $('<img>')
        let storeImage = results.photos_url

        $(showImage).append(storeImage)
        $(showDiv).append(averagefor2, cuisines, location,showImage)
        $('#show-results').prepend(showDiv)

        }
      } 
    })
  }

  var queryURL2 = 'https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/distancematrix/json?origins=|7916+Causeway+Dr+Charlotte&destinations=3120+N+Davidson+Street+Charlotte&key=AIzaSyAwprJVRaKbbUc19bvkqHN_8ICjtUSVAJg'

  $('#distanceButton').on('click', function(event){
    $.ajax({
    url: queryURL2,
    dataType: 'json',
    method: 'GET'
    }).then(function(response){
        console.log(response)
        console.log(response.destination_addresses[0])
        console.log(response.origin_addresses[0])
        console.log(response.rows[0].elements[0].duration.text)

        let origin = response.origin_addresses[0]
        let destination = response.destination_addresses[0]
        let duration = response.rows[0].elements[0].duration.text

        let distDiv = $('<div>')
        let originDiv = $('<p>').text('Origin: ' + origin)
        let destDiv = $('<p>').text('Destination: ' + destination)
        let duraDiv = $('<p>').text('Duration: ' + duration)
        
        $(distDiv).append(originDiv, destDiv, duraDiv)
        $('#show-duration').append(distDiv)
    })
  })

    
</script>
    
</body>
</html>

<!-- $.ajax({
    method: "GET",
    crossDomain: true,
    url: queryURL,
    dataType: "json",
    async: true,
    headers: {
    "user-key": "c837c692050384b3446ac7955ad2641b"
    }, -->